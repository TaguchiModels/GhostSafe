<Controls:MetroWindow x:Class="GhostSafe.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:Controls="http://metro.mahapps.com/winfx/xaml/controls"
        xmlns:local="clr-namespace:GhostSafe"
        mc:Ignorable="d"
        BorderBrush="{DynamicResource MahApps.Brushes.Accent}"
        BorderThickness="0"
        GlowBrush="Black"
        ShowIconOnTitleBar="True"
        ShowTitleBar="True"
        ShowCloseButton="True"
        TitleCharacterCasing="Normal"
        StateChanged="MetroWindow_StateChanged"
        Title="GhostSafe" Height="600" Width="800" WindowStartupLocation="CenterScreen">
    <Controls:MetroWindow.Resources>
        <Style TargetType="MenuItem" x:Key="PurpleMenuItemStyle">
            <Setter Property="Foreground" Value="WhiteSmoke" />
            <Setter Property="Background" Value="Purple" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="MenuItem">
                        <Grid>
                            <Border x:Name="Border" Background="{TemplateBinding Background}" Padding="4">
                                <ContentPresenter ContentSource="Header" RecognizesAccessKey="True"/>
                            </Border>
                            <Popup x:Name="PART_Popup"
                               Placement="Right"
                               HorizontalOffset="-1"
                               VerticalOffset="-1"
                               IsOpen="{TemplateBinding IsSubmenuOpen}"
                               AllowsTransparency="True"
                               Focusable="False"
                               PopupAnimation="Fade">
                                <Border
                                Background="Purple"
                                BorderBrush="Gray"
                                BorderThickness="1"
                                SnapsToDevicePixels="True">
                                    <StackPanel IsItemsHost="True" />
                                </Border>
                            </Popup>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsHighlighted" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="DarkViolet"/>
                            </Trigger>
                            <Trigger Property="IsSubmenuOpen" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="DarkMagenta"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Foreground" Value="Gray"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- すべての MenuItem に適用 -->
        <Style TargetType="MenuItem" BasedOn="{StaticResource PurpleMenuItemStyle}" />
    </Controls:MetroWindow.Resources>
    <DockPanel>
        <!-- グリッドでメニューを左右に分ける -->
        <Grid DockPanel.Dock="Top" Background="MediumOrchid">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- 右寄せの言語切替メニュー -->
            <Menu Grid.Column="1" Background="MediumOrchid" FontSize="16"
                Margin="0 0 20 0" VerticalAlignment="Center"
                Foreground="WhiteSmoke" HorizontalAlignment="Right">
                <MenuItem Name="ChangeDisplay" Visibility="Collapsed"
                        Header="{DynamicResource ChangeDisplay}" FontSize="16"
                        Background="MediumOrchid" Foreground="WhiteSmoke">
                    <MenuItem Header="Icons" Click="OnSelectIcons"/>
                    <MenuItem Header="Details" Click="OnSelectDetails"/>
                </MenuItem>
                <MenuItem Header="{DynamicResource Settings}" FontSize="16"
                        Background="MediumOrchid" Foreground="LightGray"
                        Name="Settings" IsEnabled="False" >
                    <MenuItem Header="{DynamicResource Settings}" Click="OnSettings"/>
                    <MenuItem Header="Top" Click="OnTopWindow"/>
                </MenuItem>
                <MenuItem Header="{DynamicResource ChangeLanguage}" FontSize="16"
                        Background="MediumOrchid" Foreground="WhiteSmoke">
                    <MenuItem Header="English" Click="OnSelectEnglish"/>
                    <MenuItem Header="日本語" Click="OnSelectJapanese"/>
                </MenuItem>
            </Menu>
        </Grid>

        <!-- ページを表示するフレーム -->
        <Frame x:Name="MainFrame" NavigationUIVisibility="Hidden"/>

    </DockPanel>
</Controls:MetroWindow>
